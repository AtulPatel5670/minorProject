<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INSERTION SORT</title>
    <link href="insertion.css" rel="stylesheet"> <!-- External CSS file -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

</head>
<body>
    <nav>
        <a href="home.html"><button class="home-button"><i class="fa-solid fa-igloo fa-2xl"> Home</i></button></a>
        <div class="dropdown">
            <button class="dropdown-btn">Menu</button>
            <div class="dropdown-content">
                <a href="bubblesort.html">Bubble Sort</a>
                <a href="selectionsort.html">Selection Sort</a>
                <a href="mergesort.html">Merge Sort</a>
                <a href="quicksort.html">Quick Sort</a>
                <a href="insertionsort.html">Insertion Sort</a>
            </div>
        </div>
        <p class="center-text">VisuAlgo</p>
    </nav>

    <div class="main-container">
        <h1 class="heading">Insertion Sort Visualizer</h1>

        <div class="controls">
            <button id="generate-bars">Generate Random Bars</button>
            <input id="size" type="range" min="6" max="20" oninput="generateBars()" />
            <button id="start-sorting">Sort</button>
            <input style="width: 15%;
            padding: 0.5rem;
            border: 1px solid #6541d9;
            border-radius: 5px;
            font-size: 30px;" type="text" id="user-array" placeholder="Enter numbers separated by commas">
            <button id="add-array">Add Array</button>
            <label for="speed" style="font-size: 200%;color: #6e0dff;font-weight: bold;">Speed:</label>
            <input type="range" id="speed" min="1" max="50" value="25">
            <div id="complexity-container">
                <h3>Algorithm Complexity:</h3>
                <p><strong>Time Complexity:</strong> O(nÂ²)</p>
                <p><strong>Space Complexity:</strong> O(1)</p>
            </div>
        </div>


     

        <div class="visualizer">
            <div class="container" id="bar-container"></div>
            <div class="code-container" id="code-display">
                <pre id="code-display-text">
                    function insertionSort(arr) {
                        for (let i = 1; i < arr.length; i++) {
                            let key = arr[i];
                            let j = i - 1;
                    
                            while (j >= 0 && arr[j] > key) {
                                arr[j + 1] = arr[j];
                                j = j - 1;
                            }
                            arr[j + 1] = key;
                        }
                    }
                   
                </pre>
            </div>
            <div id="log-container">
                <h1>Logs:</h1>
                <ul id="log-list" style="list-style-type: none; padding: 0;"></ul>
            </div>
        </div>
    </div>

    <script>
        const barsContainer = document.getElementById("bar-container");
        const logContainer = document.getElementById("log-container");
        const codeText = document.getElementById("code-display-text");
        const speedSlider = document.getElementById("speed");
        let delay = 1000;

        function updateSpeed() {
            let sliderValue = document.getElementById("speed").value;
            delay = (51 - sliderValue) * 20;
        }

        const logMessage = (message) => {
            const log = document.createElement("p");
            log.textContent = message;
            logContainer.appendChild(log);
        };

        const generateBars = () => {
            barsContainer.innerHTML = "";
            let arraySize = Math.floor(Math.random() * 20) + 6;
            let numbers = Array.from({ length: arraySize }, () => Math.floor(Math.random() * 100) + 10);
            createBars(numbers);
        };

        function createBars(numbers) {
            barsContainer.innerHTML = "";
            numbers.forEach(value => {
                let bar = document.createElement("div");
                bar.classList.add("bar");
                bar.style.height = `${Math.min(value, 100)}%`;
                let label = document.createElement("div");
                label.classList.add("bar-label");
                label.textContent = value;
                bar.appendChild(label);
                barsContainer.appendChild(bar);
            });
        }

        const addArray = () => {
            const input = document.getElementById("user-array").value;
            const values = input.split(",").map(num => parseInt(num.trim()));
            barsContainer.innerHTML = "";
            values.forEach(value => {
                let bar = document.createElement("div");
                bar.classList.add("bar");
                bar.style.height = `${value}%`;
                let label = document.createElement("div");
                label.classList.add("bar-label");
                label.textContent = value;
                bar.appendChild(label);
                barsContainer.appendChild(bar);
            });
        };

        const highlightCode = (lineNumber) => {
            const lines = codeText.textContent.split("\n");
            const highlighted = lines.map((line, index) =>
                index === lineNumber ? `<span class="highlight">${line}</span>` : line
            );
            codeText.innerHTML = highlighted.join("\n");
        };

        const insertionSort = async () => {
            const bars = document.querySelectorAll(".bar");
            logMessage("Starting Insertion Sort...");
            for (let i = 1; i < bars.length; i++) {
                let keyHeight = bars[i].style.height;
                let keyValue = bars[i].textContent;
                let j = i - 1;

                bars[i].style.backgroundColor = "red";
                highlightCode(2);
                await new Promise(resolve => setTimeout(resolve, delay));

                while (j >= 0 && parseInt(bars[j].textContent) > parseInt(keyValue)) {
                    bars[j + 1].style.height = bars[j].style.height;
                    bars[j + 1].textContent = bars[j].textContent;
                    bars[j].style.backgroundColor = "yellow";

                    highlightCode(5);
                    await new Promise(resolve => setTimeout(resolve, delay));
                    j--;
                }

                bars[j + 1].style.height = keyHeight;
                bars[j + 1].textContent = keyValue;
                bars[i].style.backgroundColor = "rgb(5, 139, 248)";
                logMessage(`Moved ${keyValue} to position ${j + 2}`);
            }
            logMessage("Insertion Sort Completed!");
        };

        document.getElementById("generate-bars").addEventListener("click", generateBars);
        document.getElementById("add-array").addEventListener("click", addArray);
        document.getElementById("start-sorting").addEventListener("click", insertionSort);
        speedSlider.addEventListener("input", updateSpeed);

        generateBars();
    </script>
</body>
</html>
